{% extends 'base.html' %}


{% block content %}


<style>
    .product {
        display: grid;
        grid-template-columns: 0.2fr 1fr;
    }
</style>

<body>
    <h1>Your Cart</h1>

    {% if products|length > 0 %}
        
        <form method="POST" action="">
            {% csrf_token %}
            {% for item, qty in products %}
                {% if qty > 0 %}
                    <hr>
                    <div class="product">
                        <div class="left-side">
                            <img style="height: 30vh" src="/media/{{ item.product_id }}/img1.webp" alt="product-image">
                        </div>

                        <div class="right-side">
                            <a href="{% url 'product' item.product_id %}">{{ item.name }}    </a>
                            <h4>S$ {{ item.price }}</h4>

                            <label>Quantity (max 10)</label> 
                            <p><input name="{{ item.product_id }}" type="number" value="{{ qty }}" max="10" min="0">  </p>
                                
                            <p>{{ item.description|truncatewords:10 }}</p>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
            <hr>
            <strong>Your Total: S$ {{ total }}</strong>

            <input type="submit" value="Checkout"></input>
            
        </form>

        <form method="GET" action="/cart/clear_cart/">
            <input type="submit" value="Empty Cart"></input>
        </form>

        <hr>
    {% else %}
        <p><a href="{% url 'home' %}">Shop</a> to add products to cart</p>
    {% endif %}
</body>

{% endblock %}